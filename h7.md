## a) Hei maailma
>  Käännä "Hei maailma" haluamallasi kielellä.

- Loin oppitunnin aikana kansion `scripts`-kansion, siirrytään sinne `cd scripts`.
- `micro hello` - luodaan uusi tiedosto nimeltä hello
- Teen komennon pythonilla, joten shebangiksi tulee `#!/usr/bin/env python3`

<img src="https://github.com/iines-j/linux-repo/assets/148907657/06a7e334-7acc-4205-b7ab-8310b5a7700c" width="500"></img>

- `python3 hello` - ajetaan komento

<img src="https://github.com/iines-j/linux-repo/assets/148907657/c6b1f782-739e-4a4e-a417-25ce9ab11732" width="500"></img>

____
## b) Komento
>  Laita Linuxiin uusi komento niin, että kaikki käyttäjät voivat ajaa sitä.

- `chmod ugo+x hello` - annetaan execute-oikeudet hello-tiedostoon
- `sudo cp tiedosto /usr/local/bin/` - siirretään komento kaikkien käytettäväksi

<img src="https://github.com/iines-j/linux-repo/assets/148907657/6aa69c32-55bf-45cc-b86c-e455a5db9278" width="500"></img>

- `sudo adduser testaaja` - luodaan uusi käyttäjä
- `su testaaja` - kirjaudutaan uudelle käyttäjälle
- `hello` - komento toimii myös testaajalla!

<img src="https://github.com/iines-j/linux-repo/assets/148907657/2ade18d2-8b26-407e-97a4-7463084b1726" width="500"></img>

____
## c) Laboratorio
> Ratkaise vanha arvioitava laboratorioharjoitus soveltuvin osin.

Teen [tämän labratehtävän](https://terokarvinen.com/2022/linux-palvelimet-final-lab/) vuodelta 2022.
Tiivistin alle tehtävän vaatimukset:

1. Donations
	- salasanasuojattu tietokanta
	- jokaiselta lahjoittajalta nimi, summa, yhteystiedot
	- tuotantoasennus
	- vastaa osoitteesta vapaus.example.com
	- bonus: PostgreSQL

2. Maijan sivu
	- uusi käyttäjä, Maija Mallioppilas
	- Maijalle staattinen webbisivu jota hän saa muokata (HTML5)
	- vastaa osoitteesta games.example.com (DNS:n simulointi hostfile-tiedostolla on ok)

Aloitetaan helpommasta, eli Maijan käyttäjän ja webbisivun luomisesta.

<br/>

### Maijan sivu
- `cd /etc/apache2/sites-available` `sudoedit games.example.com.conf` - luodaan conf-tiedosto uudelle games.example.com-sivulle

<img src="https://github.com/iines-j/linux-repo/assets/148907657/1ed2c1dc-10a0-492b-939e-9940abfed646" width="500"></img>

- `cd /home/iinesj/publicweb/` `mkdir games.example.com`
- `cd games.example.com` `mkdir static` `cd static`
- `micro index.html`

<img src="https://github.com/iines-j/linux-repo/assets/148907657/5727f011-4423-44b7-8bf4-7932c8650456" width="500"></img>

- `sudo a2ensite games.example.com` - sivu päälle
- `sudo systemctl restart apache2` - uudelleenkäynnistetään Apache
- `sudo apache2ctl configtest` - testataan conf-tiedoston syntaksi, kaikki ok!

<img src="https://github.com/iines-j/linux-repo/assets/148907657/857f203b-83cc-454d-b214-02879af8af86" width="500"></img>
<img src="https://github.com/iines-j/linux-repo/assets/148907657/506d15d6-430c-4cfa-b116-173e260d1e95" width="500"></img>

- `sudo adduser maija` - luodaan Maijalle käyttäjä

<img src="https://github.com/iines-j/linux-repo/assets/148907657/2b342775-2b92-4372-bbe9-a89bc8514302" width="500"></img>

- `sudo groupadd maijansivu` - luodaan uusi ryhmä (tämä on vähän turhaa, oisin voinut suoraan vaihtaa ryhmäksi automaattisesti luodun maija-ryhmän)
- `sudo usermod -a -G maijansivu maija` - lisätään maija uuteen ryhmään
- `sudo chgrp maijansivu static/index.html` - vaihdetaan index.html-tiedoston ryhmäksi maijansivu
- nyt maija saa muokata `index.html`-tiedostoa!

<img src="https://github.com/iines-j/linux-repo/assets/148907657/d71bbd7f-88da-420f-8c6f-bdb8e5878ece" width="500"></img>
<img src="https://github.com/iines-j/linux-repo/assets/148907657/97a92a71-f9db-48c8-b4b0-4b1cd37d752a" width="500"></img>

<br/>

### Donations

- loin uuden kansion `/home/iinesj/labra` tätä tehtävää varten.
- `sudo apt-get install python3-dev libpq-dev postgresql postgresql-contrib` - asennetaan tarvittavat paketit
- `sudo -u postgres psql` - kirjaudutaan postgres-sessioon
- 

![image](https://github.com/iines-j/linux-repo/assets/148907657/093356b7-1f22-40a2-ab62-83d8d8f9f879)
![image](https://github.com/iines-j/linux-repo/assets/148907657/14c7d959-6404-4147-9465-88970367f888)

- `GRANT ALL PRIVILEGES TO DATABASE donations TO donadmin;` - annetaan donadmin-käyttäjälle kaikki oikeudet tietokantaamme
- `\q` - sulkee postgres-session

![image](https://github.com/iines-j/linux-repo/assets/148907657/7ab28df3-2ce5-46fa-9d77-b8690500bb5d)

- `virtualenv --system-site-packages -p python3 env/` - uusi env-kansio
- `source env/bin/activate` - laitetaan virtual enviroment päälle
- `micro requirements.txt` - luodaan vaatimustiedosto, johon kirjoitetaan `django` sekä `psycopg2` 
- `pip install -r requirements.txt` - asennetaan
- `django-admin startproject donations` - luodaan uusi projekti

![image](https://github.com/iines-j/linux-repo/assets/148907657/7a05663e-b4a2-43bd-92b1-eb75eb2b6a09)

- `sudoedit /etc/apache2/sites-available/vapaus.example.com.conf` - luodaan uusi conf-tiedosto
- kopioin Teron [Deploy Django](https://terokarvinen.com/2022/deploy-django/)-artikkelista conf-tiedoston pohjan ja muokkaan siihen omat tietoni

![image](https://github.com/iines-j/linux-repo/assets/148907657/1341a978-ea3b-42d2-9fe8-0a7f709786ec)

- `sudoedit /etc/hosts` - käväistään muokkaamassa hosts-tiedostoon kummatkin sivumme

![image](https://github.com/iines-j/linux-repo/assets/148907657/b1da5889-6282-4278-a353-936dce85406e)

- `sudo rm /var/www/html/index.html` - poistetaan apachen default index-sivu


todo: hostfile

<img src="" width="500"></img>

____
## Lähteet

- Tero Karvinen. Hello World Python3, Bash, C, C++, Go, Lua, Ruby, Java. [Linkki.](https://terokarvinen.com/2018/hello-python3-bash-c-c-go-lua-ruby-java-programming-languages-on-ubuntu-18-04/) Luettu 7.3.2024.
- Tero Karvinen. Deploy Django. [Linkki.](https://terokarvinen.com/2022/deploy-django/) Luettu 10.3.2024.
- GeeksForGeeks.org. Chgrp command in Linux. [Linkki.](https://www.geeksforgeeks.org/chgrp-command-in-linux-with-examples/) Luettu 10.3.2024.
- DigitalOcean.com. How To Use PostgreSQL With Your Django Application. [Linkki.](https://www.digitalocean.com/community/tutorials/how-to-use-postgresql-with-your-django-application-on-ubuntu-20-04) Luettu 10.3.2024.

